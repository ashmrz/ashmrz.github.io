<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" href="icons/laptop.png" type="image/png">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ashkan Mirzaei</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        html { 
            scroll-behavior: smooth;
        }
        
        @media (prefers-reduced-motion: reduce) {
            html {
                scroll-behavior: auto;
            }
            * {
                animation-duration: 0.01ms !important;
                transition-duration: 0.01ms !important;
            }
        }
        
        body {
            background: linear-gradient(to bottom, #f5f7fa 0%, #e8edf2 100%);
            color: #1d1d1f;
            min-height: 100vh;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Helvetica Neue", Arial, sans-serif;
            line-height: 1.6;
            margin: 0; 
            padding: 0;
            overflow-x: hidden;
            position: relative;
        }
        
        /* Removed heavy gradient background for better performance */
        
        .container { 
            max-width: 1200px; 
            padding: 0 1.5rem; 
            position: relative;
            z-index: 1;
        }
        
        /* Optimized Cards - Reduced backdrop-filter for better performance */
        .publication-card, .profile-card, .timeline-item {
            background: rgba(255, 255, 255, 0.85);
            border-radius: 24px;
            border: 0.5px solid rgba(255, 255, 255, 0.9);
            box-shadow: 
                0 4px 16px rgba(0, 0, 0, 0.06),
                0 1px 3px rgba(0, 0, 0, 0.02);
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        /* Removed pseudo-element for better performance */
        
        .publication-card:hover, .timeline-item:hover {
            transform: translateY(-4px);
            box-shadow: 
                0 8px 24px rgba(0, 0, 0, 0.12),
                0 2px 6px rgba(0, 0, 0, 0.04);
        }
        
        .profile-card:hover {
            transform: translateY(-2px);
            box-shadow: 
                0 8px 24px rgba(0, 0, 0, 0.08),
                0 2px 8px rgba(0, 0, 0, 0.03);
        }
        
        .publication-media {
            width: 100%; 
            object-fit: cover;
            aspect-ratio: 16/9;
        }
        
        .publication-body { 
            padding: 2rem; 
            background: transparent;
        }
        
        .venue-badge {
            background: rgba(255, 255, 255, 0.7);
            color: #1d1d1f; 
            padding: 0.6rem 1.4rem; 
            border-radius: 100px;
            font-size: 0.875rem; 
            font-weight: 600; 
            display: inline-block;
            margin-bottom: 1rem; 
            border: 0.5px solid rgba(230, 230, 235, 1);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
            letter-spacing: -0.01em;
        }
        
        .profile-card {
            border-radius: 28px; 
            padding: 2rem 2.5rem; 
            height: auto; 
            position: relative;
        }
        
        .profile-image {
            width: 140px; 
            height: 140px; 
            border-radius: 50%; 
            object-fit: cover;
            border: 3px solid rgba(255, 255, 255, 0.9);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }
        
        .profile-image:hover {
            transform: scale(1.05);
        }
        
        .social-links { 
            display: flex; 
            gap: 0.75rem; 
            justify-content: center; 
            margin-top: 1.25rem; 
        }
        
        .social-link {
            width: 44px; 
            height: 44px; 
            display: flex; 
            align-items: center; 
            justify-content: center;
            border-radius: 50%; 
            background: rgba(255, 255, 255, 0.7);
            border: 0.5px solid rgba(230, 230, 235, 1); 
            color: #1d1d1f;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            aspect-ratio: 1;
        }
        
        .social-link:hover {
            transform: translateY(-2px);
            background: rgba(255, 255, 255, 0.9);
            color: #000;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .social-links .social-link img[alt="Bluesky Icon"] {
            width: 18px; 
            height: 18px; 
            vertical-align: middle;
            filter: grayscale(20%) brightness(95%) opacity(85%);
            transition: filter 0.3s;
        }
        
        .social-link:hover img[alt="Bluesky Icon"] {
            filter: grayscale(0%) brightness(100%) opacity(100%);
        }
        
        h1, h2, h3, h4 {
            color: #1d1d1f;
            font-weight: 700;
            letter-spacing: -0.02em;
        }
        
        h2 {
            font-size: 2.5rem;
            margin-bottom: 1.5rem;
        }
        
        @media (max-width: 768px) {
            .publication-card .row { flex-direction: column; }
            .publication-media { height: auto; aspect-ratio: 16/9; }
            #publications-container { padding-bottom: 2rem; }
            footer { position: relative; bottom: 0; width: 100%; margin-top: 2rem; }
            .timeline-container { overflow-x: auto; }
            .profile-card { padding: 1.75rem 1.5rem; }
            .profile-image { width: 120px; height: 120px; }
            h2 { font-size: 2rem; }
            .container { padding: 0 1rem; }
            .social-links { gap: 0.65rem; margin-top: 1rem; }
            .social-link { width: 40px; height: 40px; }
        }
        
        .publication-card h5 {
            color: #1d1d1f;
            font-weight: 600;
            letter-spacing: -0.01em;
            transition: color 0.3s;
        }
        
        .publication-body p, .publication-body small,
        #education .card p, #education .card span, #education .card h4,
        #research .card p, footer p { 
            color: #424245 !important; 
        }
        
        /* Removed heavy animations for better performance */
        
        .search-container { 
            margin-bottom: 1.5rem; 
        }
        
        .search-input {
            width: 100%; 
            padding: 1.1rem 1.75rem; 
            border-radius: 20px;
            border: 1px solid rgba(230, 230, 235, 1);
            background: rgba(255, 255, 255, 0.8);
            color: #1d1d1f; 
            font-size: 1rem;
            transition: border-color 0.2s ease, box-shadow 0.2s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
        }
        
        .search-input:focus {
            outline: none;
            border-color: rgba(200, 200, 210, 1);
            background: rgba(255, 255, 255, 0.95);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }
        
        .search-input::placeholder { 
            color: #86868b; 
        }
        
        .abstract-toggle {
            background: none; 
            border: none; 
            border-radius: 12px;
            padding: 0.6rem 1.2rem; 
            color: #1d1d1f; 
            font-size: 0.875rem;
            cursor: pointer; 
            margin-top: 1rem;
            transition: background 0.2s ease;
        }
        
        .abstract-toggle:hover { 
            background: rgba(240, 240, 245, 0.8); 
        }
        
        .abstract-content {
            max-height: 0; 
            overflow: hidden; 
            transition: max-height 0.3s ease;
            margin-top: 0.5rem; 
            padding: 0 1rem;
        }
        
        .abstract-content.expanded {
            max-height: 600px; 
            padding: 0 1rem 1rem;
        }
        
        .project-link {
            background: rgba(255, 255, 255, 0.7);
            border: 0.5px solid rgba(230, 230, 235, 1);
            color: #1d1d1f; 
            padding: 0.65rem 1.4rem; 
            border-radius: 100px;
            font-size: 0.875rem; 
            font-weight: 600;
            text-decoration: none; 
            display: inline-flex; 
            align-items: center; 
            gap: 0.6rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            letter-spacing: -0.01em;
        }
        
        .project-link:hover {
            background: rgba(255, 255, 255, 0.9);
            transform: translateY(-1px); 
            color: #000;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .timeline-container {
            overflow-x: auto; 
            padding: 1rem 0;
            scrollbar-width: thin; 
            scrollbar-color: rgba(0, 0, 0, 0.1) transparent;
        }
        
        .timeline-container::-webkit-scrollbar { 
            width: 8px; 
            height: 8px; 
        }
        
        .timeline-container::-webkit-scrollbar-track { 
            background: transparent; 
        }
        
        .timeline-container::-webkit-scrollbar-thumb { 
            background: rgba(0, 0, 0, 0.1); 
            border-radius: 100px; 
        }
        
        .timeline-container::-webkit-scrollbar-thumb:hover { 
            background: rgba(0, 0, 0, 0.15); 
        }
        
        .timeline { 
            display: flex; 
            gap: 1.5rem; 
            width: fit-content; 
            padding: 1rem 0; 
        }
        
        .timeline-item {
            border-radius: 20px; 
            padding: 1.75rem; 
            min-width: 320px; 
            flex: none; 
            position: relative;
        }
        
        .timeline-item h4 { 
            margin-bottom: 0.5rem; 
            color: #1d1d1f;
            font-weight: 600;
        }
        
        .timeline-item p { 
            color: #424245; 
        }
        
        .timeline-item .time-range { 
            font-size: 0.875rem; 
            color: #86868b; 
            font-weight: 500;
        }
        
        .timeline-item::before {
            content: ""; 
            position: absolute; 
            right: -0.75rem; 
            top: 50%;
            transform: translateY(-50%);
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: rgba(0, 0, 0, 0.1);
            z-index: 1;
        }
        
        .timeline-item:last-child::before { 
            display: none; 
        }
        
        /* Smooth scroll styling */
        ::-webkit-scrollbar {
            width: 12px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.02);
        }
        
        ::-webkit-scrollbar-thumb {
            background: rgba(0, 0, 0, 0.1);
            border-radius: 100px;
            border: 3px solid transparent;
            background-clip: content-box;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 0, 0, 0.15);
            background-clip: content-box;
        }

        /* Hobby tags style */
        .hobby-tag {
            background: rgba(255, 255, 255, 0.6);
            padding: 0.45rem 0.9rem;
            border-radius: 100px;
            font-size: 0.813rem;
            color: #424245;
            border: 0.5px solid rgba(230, 230, 235, 1);
            transition: background 0.2s ease, transform 0.2s ease;
            cursor: default;
            display: inline-block;
        }

        .hobby-tag:hover {
            background: rgba(255, 255, 255, 0.8);
            transform: translateY(-2px);
        }

        /* Info box style */
        .info-box {
            background: rgba(255, 255, 255, 0.7);
            border-radius: 14px;
            padding: 1rem 1.5rem;
            border: 0.5px solid rgba(230, 230, 235, 1);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
            display: inline-block;
            max-width: 100%;
        }
        
        @media (max-width: 768px) {
            .info-box {
                padding: 0.875rem 1.25rem;
            }
        }

        /* Performance optimizations */
        * {
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        img, video {
            content-visibility: auto;
        }

        /* Optimize rendering performance */
        .publication-card, .profile-card, .timeline-item {
            contain: layout style paint;
        }

        /* Prevent layout shift */
        .lazy-image, .lazy-video {
            background: #f1f5f9;
        }
    </style>
</head>
<body class="min-h-screen">
    <div class="container">
        <!-- Home Section -->
        <section id="home" class="mt-5">
            <div class="row justify-content-center">
                <div class="col-md-12">
                    <div class="profile-card">
                        <div class="text-center">
                            <img src="media/profile.png" alt="Profile Picture" class="profile-image mb-3 mx-auto d-block" width="140" height="140">
                            <h1 class="text-4xl font-bold mb-1 d-none d-md-block">Ashkan Mirzaei</h1>
                            <h1 class="text-2xl font-bold mb-1 d-block d-md-none">Ashkan Mirzaei</h1>
                            <h3 class="text-sm text-gray-500 mb-1" style="margin-top: 0.25rem;">Research Scientist</h3>
                            <p class="text-sm text-gray-600 mb-0" style="line-height: 1.4;">Creative Vision Team</p>
                            <p class="text-sm text-gray-600" style="margin-top: 0.125rem;">Snap Inc.</p>
                        </div>
                        <div class="social-links">
                            <a href="mailto:ashkan.m10@gmail.com" class="social-link" title="Email me: ashkan.m10@gmail.com" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Email"><i class="fas fa-envelope"></i></a>
                            <a href="https://www.linkedin.com/in/ashkan-mirzaei-6b9651145/" class="social-link" title="LinkedIn: Ashkan Mirzaei" target="_blank" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="LinkedIn"><i class="fab fa-linkedin"></i></a>
                            <a href="https://scholar.google.com/citations?user=z8GwuTgAAAAJ&hl=en" class="social-link" title="Google Scholar Profile" target="_blank" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Google Scholar"><i class="fas fa-graduation-cap"></i></a>
                            <a href="https://twitter.com/ashmrz10" class="social-link" title="Twitter: @ashmrz10" target="_blank" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Twitter"><i class="fab fa-twitter"></i></a>
                            <a href="https://bsky.app/profile/ashmrz.bsky.social" class="social-link" title="Bluesky: ashmrz.bsky.social" target="_blank" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Bluesky">
                                <img src="icons/bluesky.svg" alt="Bluesky Icon" style="filter: brightness(2) grayscale(60%) opacity(0.55);">
                            </a>
                        </div>
                        <script>
                            document.addEventListener("DOMContentLoaded", function () {
                                var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
                                tooltipTriggerList.forEach(function (tooltipTriggerEl) {
                                    new bootstrap.Tooltip(tooltipTriggerEl);
                                });
                            });
                        </script>
                        <div class="text-center mt-3">
                            <p class="text-sm mb-2" style="color: #86868b; font-weight: 500;">When I'm not coding:</p>
                            <div class="d-flex gap-2 justify-content-center flex-wrap">
                                <span class="hobby-tag">skateboarding</span>
                                <span class="hobby-tag">hiking</span>
                                <span class="hobby-tag">cooking</span>
                                <span class="hobby-tag">movies</span>
                                <span class="hobby-tag">music</span>
                            </div>
                        </div>
                        <div class="text-center mt-3">
                            <div class="info-box">
                                <p class="text-sm mb-0" style="color: #424245 !important; line-height: 1.6;">
                                    <i class="fas fa-lightbulb" style="color: #f59e0b; margin-right: 0.5rem;"></i>
                                    If you are a PhD student with a strong background in computer vision and generative modeling, and are looking for internship opportunities, feel free to reach out!
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- Research Section -->
        <section id="research" class="mt-5">
            <h2 class="text-4xl font-bold mb-4">Research</h2>
            <div class="card publication-card shadow-sm p-4">
                <p class="text-gray-600 leading-relaxed text-justify mb-0">
                    I am a Research Scientist at Snap Inc., working on 3D and 4D generative models for content creation. My focus is on making it easier to reconstruct, generate, and edit dynamic 3D scenes. Before Snap, I did my PhD at the University of Toronto with advisors Igor Gilitschenski and Jonathan Kelly.
                </p>
            </div>
        </section>
        <!-- Experience Section -->
        <section id="experience" class="mt-5">
            <h2 class="text-4xl font-bold mb-0">Experience</h2>
            <div class="timeline-container">
                <div class="timeline" id="timeline"></div>
            </div>
        </section>
        <!-- Education Section -->
        <section id="education" class="mt-5">
            <h2 class="text-4xl font-bold mb-4">Education</h2>
            <div class="row g-2">
                <div class="col-md-12">
                    <div class="card publication-card shadow-sm p-3">
                        <div class="d-flex flex-column">
                            <div class="d-flex flex-column flex-sm-row justify-content-between align-items-start align-items-sm-center">
                                <h4 class="mb-1 mb-sm-0">University of Toronto</h4>
                                <span class="text-gray-500">Sep 2021 - May 2025</span>
                            </div>
                            <span class="text-gray-600">PhD in Computer Science</span>
                        </div>
                    </div>
                </div>
                <div class="col-md-12">
                    <div class="card publication-card shadow-sm p-3">
                        <div class="d-flex flex-column">
                            <div class="d-flex flex-column flex-sm-row justify-content-between align-items-start align-items-sm-center">
                                <h4 class="mb-1 mb-sm-0">Sharif University of Technology</h4>
                                <span class="text-gray-500">Sep 2017 - Jun 2021</span>
                            </div>
                            <span class="text-gray-600">BSc in Computer Engineering</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- Publications Section -->
        <section id="publications" class="mt-5">
            <h2 class="text-4xl font-bold mb-4">Publications</h2>
            <div class="search-container">
                <input type="text" id="publicationSearch" class="search-input" placeholder="Search publications by title, authors, venue, or abstract..." oninput="debouncedFilterPublications()">
            </div>
            <div class="row g-3" id="publications-container"></div>
        </section>
        <!-- Footer -->
        <footer class="mt-2 py-4 w-100">
            <div class="text-center text-gray-400 text-sm">
                <p class="mb-0 opacity-60">Â© 2024 Ashkan Mirzaei</p>
            </div>
        </footer>
        <!-- Scripts -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
        <script>
            document.addEventListener("DOMContentLoaded", function () {
                loadAndDisplayExperience();
                loadAndDisplayPublications();
            });

            let publications = [], debounceTimer;

            function loadAndDisplayPublications() {
                fetch("content/papers.json?" + new Date().getTime())
                    .then((response) => response.json())
                    .then((data) => {
                        publications = data.papers;
                        displayPublications(publications);
                    })
                    .catch((error) => console.error("Error loading publications:", error));
            }

            function toggleAbstract(index) {
                const card = document.getElementById(`publication-${index}`);
                const abstractContent = document.getElementById(`abstract-${index}`);
                const isExpanded = card.classList.contains("expanded");
                card.classList.toggle("expanded");
                abstractContent.style.maxHeight = isExpanded ? "0" : `${abstractContent.scrollHeight}px`;
                const chevronIcon = card.querySelector(".fa-chevron-down");
                if (chevronIcon) chevronIcon.classList.toggle("rotate-180");
            }

            function displayPublications(papers) {
                const container = document.getElementById("publications-container");
                container.innerHTML = "";
                const fragment = document.createDocumentFragment();
                
                papers.forEach((paper, index) => {
                    const mediaBorderRadius = `border-radius: 1.5rem 0 0 1.5rem;`;
                    const mediaBorderRadiusMobile = `
                        @media (max-width: 768px) {
                            #publication-${index} .publication-media,
                            #publication-${index} .media-container {
                                border-radius: 1.5rem 1.5rem 0 0 !important;
                            }
                        }
                    `;
                    let mediaContent = "";
                    if (paper.media && paper.media.trim() !== "") {
                        mediaContent = paper.media.match(/\.(mp4|webm|mov|avi|mkv)$/)
                            ? `<video class="publication-media lazy-video" data-src="${paper.media}" muted playsinline loop preload="none" style="width:100%;height:100%;object-fit:cover;object-position:center center;aspect-ratio:16/9;display:block;border-radius:inherit;" onerror="this.style.display='none'"></video>`
                            : `<img data-src="${paper.media}" alt="${paper.title} Preview" class="publication-media lazy-image" style="width:100%;height:100%;object-fit:cover;object-position:center center;aspect-ratio:16/9;display:block;border-radius:inherit;" onerror="this.style.display='none'">`;
                    } else {
                        mediaContent = `
                            <div class="publication-media d-flex align-items-center justify-content-center" style="width:100%;height:100%;background:linear-gradient(135deg,#e0e7ef 60%,#f1f5f9 100%);display:flex;flex-direction:column;gap:0.5rem;border-radius:inherit;">
                                <div style="width:48px;height:48px;border-radius:12px;background:#e5e7eb;display:flex;align-items:center;justify-content:center;">
                                    <i class="fas fa-image" style="color:#94a3b8;font-size:24px;" aria-hidden="true"></i>
                                </div>
                            </div>
                        `;
                    }

                    const colDiv = document.createElement('div');
                    colDiv.className = 'col-md-12';
                    colDiv.innerHTML = `
                    <style>${mediaBorderRadiusMobile}</style>
                    <div class="card publication-card shadow-sm" id="publication-${index}"
                        onclick="event.preventDefault(); ${paper.abstract ? `toggleAbstract(${index})` : ""}"
                        style="cursor: ${paper.abstract ? "pointer" : "default"}; padding:0; border-radius:1.5rem;">
                        <div class="row g-0 align-items-stretch" style="min-height:0;">
                            <div class="col-md-3 d-flex align-items-stretch justify-content-center" style="padding:0;">
                                <div class="media-container" style="width:100%; aspect-ratio:16/9; display:flex; align-items:center; justify-content:center; overflow:hidden; ${mediaBorderRadius} background:#f1f5f9; min-height:100%; border-radius:1.5rem 0 0 1.5rem;">
                                ${mediaContent}
                                </div>
                            </div>
                            <div class="col-md-9 d-flex align-items-center" style="padding:0;">
                                <div class="publication-body p-4 w-100" style="border-radius:0 1.5rem 1.5rem 0;">
                                    <span class="venue-badge">${paper.venue}</span>
                                    <h5 class="mb-1">${paper.title}</h5>
                                    <p class="mb-0 small">${paper.authors.replace("Ashkan Mirzaei", "<strong>Ashkan Mirzaei</strong>")}</p>
                                    ${paper.url
                                        ? `<div class="mt-3"><a href="${paper.url}" target="_blank" class="project-link" onclick="event.stopPropagation()"><i class="fas fa-external-link-alt"></i>Project Page</a></div>`
                                        : ""
                                    }
                                    ${paper.abstract
                                        ? `<div class="abstract-content" id="abstract-${index}"><p class="mt-2 small">${paper.abstract}</p></div>
                                           <div class="text-center mt-2 abstract-toggle"><i class="fas fa-chevron-down text-gray-400 transition-transform duration-300"></i></div>`
                                        : ""
                                    }
                                </div>
                            </div>
                        </div>
                    </div>`;
                    fragment.appendChild(colDiv);
                });
                container.appendChild(fragment);
                initLazyLoading();
            }

            function filterPublications() {
                const searchTerm = document.getElementById("publicationSearch").value.toLowerCase();
                const filteredPapers = publications.filter((paper) =>
                    paper.title.toLowerCase().includes(searchTerm) ||
                    paper.authors.toLowerCase().includes(searchTerm) ||
                    paper.venue.toLowerCase().includes(searchTerm) ||
                    (paper.abstract && paper.abstract.toLowerCase().includes(searchTerm))
                );
                displayPublications(filteredPapers);
            }

            function debouncedFilterPublications() {
                clearTimeout(debounceTimer);
                debounceTimer = setTimeout(filterPublications, 300);
            }

            // Lazy loading implementation using Intersection Observer
            function initLazyLoading() {
                const imageObserver = new IntersectionObserver((entries, observer) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            const element = entry.target;
                            if (element.tagName === 'IMG') {
                                element.src = element.dataset.src;
                                element.classList.remove('lazy-image');
                            } else if (element.tagName === 'VIDEO') {
                                element.src = element.dataset.src;
                                element.load();
                                // Only autoplay videos that are in viewport
                                element.play().catch(() => {});
                                element.classList.remove('lazy-video');
                            }
                            observer.unobserve(element);
                        }
                    });
                }, {
                    rootMargin: '50px 0px',
                    threshold: 0.01
                });

                document.querySelectorAll('.lazy-image, .lazy-video').forEach(element => {
                    imageObserver.observe(element);
                });
            }

            function loadAndDisplayExperience() {
                fetch("content/experience.json?" + new Date().getTime())
                    .then((response) => response.json())
                    .then((data) => displayExperience(data.experience))
                    .catch((error) => console.error("Error loading experience data:", error));
            }

            function displayExperience(experience) {
                const timeline = document.getElementById("timeline");
                timeline.innerHTML = "";
                const fragment = document.createDocumentFragment();
                
                for (let i = experience.length - 1; i >= 0; i--) {
                    const item = experience[i];
                    const div = document.createElement('div');
                    div.className = 'timeline-item';
                    div.innerHTML = `
                        <h4>${item.company}</h4>
                        <p>${item.title}</p>
                        <p class="time-range">${item.time}</p>
                    `;
                    fragment.insertBefore(div, fragment.firstChild);
                }
                timeline.appendChild(fragment);
                
                requestAnimationFrame(() => {
                    const container = document.querySelector(".timeline-container");
                    if (container) {
                        container.scrollLeft = container.scrollWidth;
                    }
                });
            }
        </script>
    </div>
</body>
</html>
